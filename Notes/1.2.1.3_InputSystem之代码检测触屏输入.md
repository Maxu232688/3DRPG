# InputSystem之代码检测触屏输入

手机上用的

---

## 获取当前触屏设备

套路一样的

```csharp
using UnityEngine.InputSystem;

//...

Touchscreen ts = Touchscreen.current;
// 由于触屏相关都是在移动平台或者有触屏的设备上使用，所以使用时最好做一次判空
if (ts == null)
{
    return;
}

```

为啥呢，有可能你电脑上就没接触屏设备，ts就是空的，就会报错。\
同理，电脑上没插鼠标键盘，之前说的获取鼠标键盘也会报错。\
在手机上获取鼠标键盘，除非你接入了，否则也会报错。

## 得到触屏手指信息

```csharp
// 得到触屏手指数量
print(ts.touches.Count);
// 得到单个触屏手指

//ts.touches[0]

// 得到所有的触屏手指
foreach (var item in ts.touches)
{
    //...
}

// 可以看出touches是个数组，里面存了触屏手指的信息。
```

## 手指按下抬起长按点击

```csharp
// 获取指定索引手指
TouchControl tc = ts.touches[0];
// 按下 抬起
if (tc.press.wasPressedThisFrame)
{

}
if (tc.press.wasReleasedThisFrame)
{

}
// 长按
if (tc.press.isPressed)
{

}
// 点击手势
if (tc.tap.isPressed)
{

}
// 连续点击次数
print(tc.tapCount);
```

## 手指位置等相关信息

```csharp
// 位置
tc.position.ReadValue();
// 第一次接触时的位置
tc.startPosition.ReadValue();
// 接触区域大小
tc.radius.ReadValue(); // 得到的是一个向量，是以向量为半径的圆的范围
// 偏移位置
tc.delta.ReadValue();
// 当前手指状态（阶段）
UnityEngine.InputSystem.TouchPhase tp = tc.phase.ReadValue();
// TouchPhase.None 无状态
// TouchPhase.Began 开始接触
// TouchPhase.Moved 移动
// TouchPhase.Ended 结束
// TouchPhase.Canceled 取消
// TouchPhase.Stationary 静止
```