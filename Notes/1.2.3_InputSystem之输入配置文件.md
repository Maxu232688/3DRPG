# InputSystem之输入配置文件

## 什么是输入配置文件

输入系统中提供了一种输入配置文件，你可以理解它是InputAction的集合，可以在一个文件中编辑多个InputAction的信息。\
里面记录了想要处理的行为和动作（也就是InputAction的相关信息），我们可以在其中自己定义InputAction(比如:开火、移动、旋转等)，然后为这个InputAction关联对应的输入动作。\
之后将该配置文件和PlayerInput进行关联，PlayerInput会自动帮助我们解析该文件。当触发这些InputAction输入动作时会以分发事件的形式通知我们执行行为

## 编辑输入配置文件

1. 在Project窗口右键Create创建InputActions配置文件
2. 双击创建出的文件
3. 进行配置

InputActions文件本质是一个json

## 配置窗口参数相关

- Action Maps：行动映射窗口，可以创建多套操作规范，将配置文件中的行为分组配置
- Actions：输入动作窗口，是InputAction的集合，可以在这里创建各种InputAction
- Properties：输入操作绑定的输入属性（InputAction相关设置）
- 工具栏：提供保存、搜索等功能
  - 左上角可以筛选设备

总之就是学会了InputAction怎么用，这个集合文件就会用了。

## 根据配置文件生成代码

1. 选择InputActions文件
2. 在Inspector窗口设置生成路径，类名,命名空间
   1. 勾选 Generate C# Class
   2. C# Class File：路径
   3. C# Class Name：类名是什么
   4. C# Class Namespace：设置命名空间
3. 应用后生成代码

打开这个文件就能看到对应的事件，里面有很多函数，不用太深究。

## 使用生成的代码进行监听

假设我在上面配置了输入文件\
在ActionMaps里面加了一套控制方案：Action1\
在Action1中加了一个鼠标左键监听：Fire\
在Action1中加了一个Vector2类型的按键监听：Move（其中绑定了wasd）\
设置了类名为TestInput。

```csharp

void Start()
{
    // 获得对象
    TestInput input = new TestInput();
    // 激活输入
    input.Enable();
    // 事件监听
    input.Action1.Fire.performed += TestFun; // 少用lambda表达式
}

private void TestFun(InputAction.CallbackContext context)
{
    //....
}

void Update()
{
    input.Action1.Move.ReadValue<Vector2>(); // 读取移动数据
}
```