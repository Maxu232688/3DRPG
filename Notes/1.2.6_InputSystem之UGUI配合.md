# InputSystem之UGUI配合

## InputSystem对UI的支持

1. 新输入系统InputSystem不支持IMGUr (GUI）注意:编辑器代码不受影响\
如果当前激活的是InputSystem，那么onGUI中的输入判断相关内容不会被触发，你必须要选择Both或者只激活老输入系统InputManager才能让onGui中内容有用
2. 新输入系统支持UGUI，但是需要使用新输入系统输入模块（Input System UI Input Module)

## UGUI中的新输入系统输入模块参数

- Move Repeat Delay：生成初始IMoveHandler之间的初始延迟(秒)。OnMove导航事件，并在移动操作保持激活状态时生成重复的导航事件。
- Move Repeat Rate： 移动动作保持激活时，生成重复导航事件之间的间隔（秒）。请注意,这是由帧速率限制的;每帧不会有多个移动重复事件,因此，如果帧速率低于重复率，则有效重复率将低于此设置。
- XR Tracking Origin: VR AR 跟踪原点
- Deselect On Background CLick：默认情况下，当指针被点击并且没有击中任何游戏对象时,当前选择被清除。然而,这可能会妨碍键盘和游戏板导航,因为它们需要关闭当前选定的对象。要防止自动取消选择，请将此属性设置为false.
- Pointer Behavior：如何处理将输入送入UI的多个指针
  - Single Mouse Or Pen But Multi Touch And Track：对于未分类为触摸或跟踪输入的所有输入，其行为类似于单个统一指针，对于跟踪和触摸输入,其行为类似于所有指针。例如,如果在鼠标和笔上接收到并发输入，则将两者的输入馈送到同一UI指针实例中。其中一个的位置输入将覆盖另一个的位置。请注意，当从触摸或跟踪设备接收到输入时，鼠标和笔的单个统一指针将被删除，包括在鼠标/笔光标当前悬停在对象上时发送的IPointerExit事件。
  - Single Unified Pointer：所有指针输入都是统一的，因此只有一个指针。这包括触摸和跟踪输入。例如，这意味着，无论有多少设备将输入输入输入点,只有帧中最后一个这样的输入才会生效并成为当前U指针的位置。
  - All Pointers As Is：UI输入模块不会统一任何指针输入。任何设备，包括提供输入指针类型动作的触摸和跟踪设备,都将是其自己的指针(或觖摸输入的多个指针).注意:这可能意味着U中将有任意数量的指针，并且可能同时指向多个对象。
- Actions Asset：包含控制UI的所有操作的输入操作资产。您可以使用以下属性选择资产中的哪些操作对应于哪些UI输入。默认情况下，这将引用名为DefaultInputActions的内置资产，该资产包含用于驱动UI的常见默认操作。如果要设置自己的操作,请创建自定义输入操作资源并在此处分配。在Inspector中将新资源引用指定给此字段时,编辑器会尝试根据常用命名约定自动将操作映射到UI输入。

## VR相关使用新输入系统注意事项

如果想在VR项目中使用新输入系统配合UGUI使用\
需要在Canvas对象上添加Tracked Device Raycaster组件

## 对人游戏使用多套UI

如果同一设备上的多人游戏，每个人想要使用自己的一套独立UI:

需要将EventSystem中的EventSystem组件替换为Multiplayer Event System组件\
与EventSystem组件不同，可以在场景中同时激活多个MultiplayerEventSystem.\
这样，您可以有多个玩家，每个玩家都有自己的InputSystemUIInputModule和MultiplayerEventSystem组件\
每个玩家都可以有自己的一组操作来驱动自己的UI实例。\
如果您正在使用PlayerInput组件，还可以设置PlayerInput以自动配置玩家的InputSystemUIInputModule以使用玩家的操作\
MultilayerEventSystem组件的属性与事件系统中的属性相同\
此外，MultiplayerEventSystem组件还添加了一个playerRoot属性，您可以将其设置为一个游戏对象\
该游戏对象包含此事件系统应在其层次结构中处理的所有UI可选择项

## On-Screen组件

On-Screen组件可以模拟UI和用户操作的交互

1. On-Screen Button:按钮交互
2. On-Screen stick:摇杆交互

非常强大的移动端虚拟摇杆